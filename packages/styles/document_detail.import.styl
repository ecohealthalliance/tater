.document-detail-container
  position fixed
  top $header-height
  bottom 0
  left 0
  right 0
  z-index $mid-layer
  .loading
    loading(false)
    position absolute
    top 100px
    transform translate(-50%, 0)
    left 50%

// If body has .no-header class then position container at top of viewport
.no-header
  .document-detail-container
    top 0

.annotations-selected-container
  background alpha($background-primary, 55%)
  padding 10px 10px 10px 10px
  position relative
  top -10px

.overlapping
  position fixed
  top $header-height + 2
  left 22.5%
  right 22.5%
  z-index $top-layer
  padding 18px 5% 10px 5%
  background-color alpha($deny, 95%)
  color white
  text-align center
  min-height 65px
  @extend .dark-shadow
  p
  i
    display inline-block
    vertical-align middle
  p
    margin 0
  i
    font-size 1.5em

.document-container
  width 55%
  left 22.5%
  padding 65px 0 0 0
  line-height 1.75em
  addBorder(all, 2px, $border-primary-l)
  border-bottom 0
  border-top 0

.document-heading
  display flex
  height 100%
  align-items center
  h1
    flex 2 0 0
    position static
    overflow hidden
    text-overflow ellipsis
    white-space nowrap
    transform translate(0,0)
    line-height 1.5em
    +below(3)
      flex 1 0 0

.document-options
  display flex
  flex 1 0 0
  height 100%
  align-items center
  justify-content flex-end
  a
    margin-left 10px
    margin-right 10px
    color $secondary-light
    font-size 1.5em
    pointer()
  .help-link-document
    font-size 1.25em
    margin 0 0 0 20px
    color $primary-light

.finished-annotating
  centerVertically()
  right 20px

button.add-note-toggle
  color $d-gray
  .icon-right
    margin-right -1px

.document-container
  .document-details
    align-items stretch
    &.active
      .finished
      .document-note
        padding-top 5px
        align-items baseline
      .document-note
        span
          white-space normal
          color $body-text
          padding-bottom 10px
        .edit
          display block
        .note-options
          align-self baseline
        .edit-note
          margin-bottom 10px
          i
            margin 0
            font-size 16px

.document-details
  .document-note
  .finished
    display flex
    align-items center
    flex 1 1 auto

  .finished
    flex-grow 0
    margin-right 20px
    padding-right 20px
    color desaturate($secondary-light, 30%)
    border-right 1px solid $border-primary-l
    white-space nowrap

  .document-note
    overflow hidden
    text-overflow ellipsis
    span
      width 95%
      white-space nowrap
      overflow hidden
      text-overflow ellipsis
    .note-options
      margin 0 0 0 10px
      flex-direction column
      justify-content center
    .view-note
      margin-right 8px
    .edit-note
    .view-note
    .close-note
      pointer()
      &:hover
        color $secondary
    .close-note
    .edit-note
      margin-bottom 5px
      margin-right 0
      color $primary-light
      font-size 18px
      line-height 18px

.completion-code
  color $d-gray
  span
    color darken($secondary, 10%)
    letter-spacing .05em

.crowdsource-details
  .admin-details
    color $primary-light
    .btn
      padding 2px 10px
      margin-left 10px
      border-width 1px
      border-color $primary-light
      background none
      color $primary-light
      font-size .75em
      &:hover
        background $border-primary-d
        color white
        @extend .dark-shadow
    .cancel
      &:hover
        background $deny
        border-color darken($deny, 20%)

.document-body
  width 100%
  max-width 1000px
  margin 0 auto

.document-wrapper
  position relative
  text-shadow none

  > .document-text
  > .document-annotations
    position absolute
    padding 20px 5% 100px 5%
    font-size 1em
    line-height 1.6em
    white-space pre-wrap
    word-wrap break-word
    word-break break-word
    +above(4)
      padding-left 10%
      padding-right 10%

  > .document-annotations
    color transparent
    top 0
    z-index -1
    text-shadow none

  > .document-text
      &::selection
        background-color $selection-color
        color $body-text

.annotation-container
  right 0
  padding-top 85px
  .annotations
    positgit ion relative
    margin-right 15px
    li
      position relative
      max-height 300px
      margin-bottom 10px
      border-top-right-radius 3px
      border-bottom-right-radius 3px
      background-color $l-gray
      border 2px solid $m-gray
      border-left 0
      pointer()
      shadow(255,.2)
      &.deleting
        transition(all, .8s)
        max-height 0
        opacity 0
        margin-bottom -4px
        overflow hidden
        .fa
          opacity 0
    .header
      font-weight 400
    .sub-header
      font-weight 600
    .keyword
      font-weight 800
    .btn-delete
      position absolute
      top 2px
      right 6px
      font-size 1.4em
    .code
      display block
      padding 25px 35px 25px 15px
      truncateString(false)
    .user
      position absolute
      bottom 5px
      right 5px
      left 40px
      text-align right
      font-size .8em
      color alpha($body-color, 90%)

    for $color, $index in $annotation-colors
      .annotation-color-{$index+1}
        background-color $color
        border-color $color
        &.selected
          border 2px solid darken($color, 40%)
          &::before
            position absolute
            top 2px
            left 15px
            content '\f06e'
            color darken($color, 30%)
            icon()
        &.not-selected
          opacity .7
          background-color $color
          &:hover
            opacity 1
            background-color $color
        &.selected
        &:hover
          border-left 0
        &:hover
          background-color lighten(@background-color, 25%)
          .btn-delete
          .toggle-flag
            visibility visible
        .btn-delete
        .toggle-flag
          transition(color, .2s)
        .btn-delete
          color darken($color, 20%)
          visibility hidden
          &:hover
            color darken(@color, 50%)
        .toggle-flag
          position absolute
          z-index $bottom-layer
          bottom 5px
          left 15px
          color darken($color, 40%)
          visibility hidden
          &.flagged
            visibility visible
            color darken($color, 30%)
            transition(color, .2s)
          &:hover
            color darken($color, 80%)

.annotation-highlight
  border-top 2px #FFF solid
  border-bottom 2px #FFF solid

for $color, $index in $annotation-colors
  .annotation-highlight-{$index+1}
    background-color alpha($color, 60%)
    border-radius 2px
    transition(background, .2s, ease-in-out)
    &.highlighted
      background-color alpha($color, 85%)
    &.not-highlighted
      background-color alpha($color, 25%)

.annotation-highlight-temporary
  background-color $selection-color
  border-radius 2px
  padding 2px 0
