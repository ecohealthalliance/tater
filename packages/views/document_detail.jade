template(name="documentDetail")
  if document
    .document-detail-container
      +codingKeywords accessCode=accessCode
      .document-heading
        h1.document-title= document.title
        if accessCode
          button.finished-annotating.btn.btn-primary(data-toggle="modal" data-target="#completionCodeModal")
            i.fa.fa-check-circle.icon-left
            span Finished Annotating
      .document-container
        #documentContainer
          #documentBody.document-body
            .document-wrapper
              pre.document-text= document.body
              if Template.subscriptionsReady
                each annotationLayers
                  .document-annotations
                    pre.document-text= this
      .annotation-search-container
        input.annotation-search.form-control(type="text" placeholder="Search Annotations")
      .annotation-container
        ul.annotations.list-unstyled
          if Template.subscriptionsReady
            each annotations
              li(data-annotation-id=_id class="annotation-color-#{color} {{selected}}")
                unless accessCode
                  span.code= code
                else
                  span.code
                    span= positionInformation
                    span.header= header
                if flagged
                  span.toggle-flag.flagged.fa.fa-flag(data-annotation-id=_id)
                else
                  span.toggle-flag.fa.fa-flag-o(data-annotation-id=_id)
                span.user= annotationUserEmail
                .delete-annotation.btn-delete(data-annotation-id=_id)
                  i.fa.fa-times-circle
            else
              .no-results
                i.fa.fa-search
                p Sorry, no annotations found
  #completionCodeModal.modal.fade
    .modal-dialog
      .modal-content
        .modal-body
          p.instructions Thanks for completing this HIT.  Please enter this code into Mechanical Turk.
          h5.completion-code Code:
            span {{accessCode}}
