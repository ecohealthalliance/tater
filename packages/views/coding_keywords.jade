template(name="codingKeywords")
  .code-search-container.pane-head.pane-head-l
    input.code-search.form-control(type="text" placeholder="Search Code Keywords")
    i.fa.fa-times-circle.clear-search
  .coding-container.pane.pane-left
    ul.list-unstyled.code-list(class=action)
      if selectedCodes
        .clear-codes-container
          button.btn.btn-block.btn-default.btn-sm.clear-selected-codes Clear Selected Codes
      if Template.subscriptionsReady
        unless filtering
          if coding
            each headers
              unless ../accessCode
                li.code-header.coding.highlighted.selectable(class='code-header-#{color}')
                  i.up
                  span.selectable-code(data-id=_id class="{{highlightHeading}}")
                    span.icon.fa(class=icon)
                    span.header-name= header
                  ul.code-sub-headers.coding.list-unstyled
                    each subHeaders header
                      li.code-sub-header.selectable
                        i.down
                        span.selectable-code(data-id=_id)= subHeader
                        ul.code-keywords.list-unstyled.hidden
                          each keywords subHeader
                            li.code-keyword.coding.selectable
                              span.selectable-code(data-id=_id)= keyword
              else
                li.code-header.count.highlighted.selectable(class='code-header-#{color}')
                  span.header-name.selectable-code(data-id=_id)= header
          else
            each headers
              li.code-header.selectable.selectable-code(class="code-header-#{color}" )
                i(class="{{toggleDirection 'header'}}")
                span.selectable.selectable-code(data-id=_id class="{{selected}}")
                  span.icon.fa(class=icon)
                  span.header-name= header
                ul.code-sub-headers.list-unstyled(class="{{showList 'header'}}")
                  each subHeaders header
                    li.code-sub-header.selectable.selectable-code
                      i(class="{{toggleDirection 'subHeader'}}")
                      span.selectable.selectable-code(data-id=_id class="{{selected}}")= subHeader
                      ul.code-keywords.list-unstyled(class="{{showList 'subHeader'}}")
                        each keywords subHeader
                          li.code-keyword.selectable.selectable-code
                            span.selectable.selectable-code(data-id=_id class="{{selected}}")= keyword
        else
          ul.filteredCodes.list-unstyled
            each filteredCodes
              li.filter-result.selectable.selectable-code(class="code-#{color}")
                span.selectable.selectable-code(data-id=_id)=code
            else
              .no-results
                i.fa.fa-search
                p Sorry, no codes found
        .text-center
          a(href="mailto:hagan@ecohealthalliance.org?subject=Tater%20Coding%20Keyword%20Suggestion") Suggest new coding keyword
      else
        .loading
