template(name="documentDetailCodingKeywords")
  .code-search-container.pane-head(class="pane-head-l")
    if Template.subscriptionsReady
      input.code-search.form-control(type="text" placeholder="Search Code Keywords")
      if searching
        i.fa.fa-times-circle.clear-search
  .coding-container.pane(class="pane-l")
    ul.list-unstyled.code-list(class=action)
      if Template.subscriptionsReady
        .pane-actions
          button.toggle-all-codes.btn-plain
            if showingAllCodes
              i.fa.fa-chevron-circle-right
              | Collapse all codes
            else
              i.fa.fa-chevron-circle-down
              | Show all codes
        each headers
          if ../hitId
            li.code-header.count.highlighted.selectable(class='code-header-#{color}')
              span.header-name.selectable-code= label
          else
            li.code-header.coding.highlighted.selectable(class='code-header-#{color}')
              i(class="{{#if showingAllCodes}} up {{else}} down {{/if}}")
              span.selectable-code(class="{{highlightHeading}}")= label
              ul.code-sub-headers.coding.list-unstyled(class="{{#unless showingAllCodes}} hidden {{/unless}}")
                each subHeaders _id
                  li.code-sub-header.selectable
                    i(class="{{#if showingAllCodes}} up {{else}} down {{/if}}")
                    span.selectable-code.showing= label
                    ul.code-keywords.list-unstyled(class="{{#unless showingAllCodes}} hidden {{/unless}}")
                      each keywords _id
                        li.code-keyword.coding.selectable
                          span.selectable-code(data-id=_id)= label
        else
          if searching
            .no-results
              i.fa.fa-search
              p Sorry, no codes found.
          else
            .no-results
              p No annotations currently present.

      else
        .loading
