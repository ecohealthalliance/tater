template(name="documentDetail")
  if document
    .document-detail-container
      +codingKeywords
      .document-heading
        h1.document-title= document.title
        .show-tags(class="{{showTags}}")
          i.fa.fa-tag
      .document-container
        #documentContainer
          .document-tags-container(class="{{showTags}}")
            .document-tags-wrap.clearfix
              if tags
                ul.document-tags.list-unstyled.pull-left
                  each tags
                    li.label
                      span.tag-label-info.tag #{tag}
                      span.remove-tag
                        i.fa.fa-times-circle
                a.btn.btn-default.btn-xs.add-tag.pull-right
                  span Add tag
                  i.fa.fa-plus
              else
                a.btn.btn-default.btn-xs.add-tag.pull-left
                  span Add tag
                  i.fa.fa-plus
          #documentBody.document-body
            .document-wrapper
              pre.document-text= document.body
              if Template.subscriptionsReady
                each annotationLayers
                  .document-annotations
                    pre.document-text= this
      .annotation-search-container
        input.annotation-search.form-control(type="text" placeholder="Search Annotations")
      .annotation-container
        ul.annotations.list-unstyled
          if Template.subscriptionsReady
            each annotations
              li(data-annotation-id=_id class="annotation-color-#{color} {{selected}}")
                span.code= code
                span.user= annotationUserEmail
                .delete-annotation.btn-delete(data-annotation-id=_id)
                  i.fa.fa-times-circle
            else
              .no-results
                i.fa.fa-search
                p Sorry, no annotations found
    .add-tag-modal.modal
      .modal-dialog
        .modal-content
          .modal-body
            +reactiveTable collection=availableTags settings=tagTableSettings

template(name="tagCell")
  span= label

