template(name="codingKeywords")
  .view-header.primary-bg
    .container
      h1 Code Management

  .container.code-management-container
    if Template.subscriptionsReady
      .row
        .code-management-list-wrap.col-sm-4
          .code-management-list-header
            h4 Headers
            i.add-code.add-header.fa.fa-plus(data-level="header" class="{{#if addingCode 'header'}}active{{/if}}")
          .code-management-list-container
            if headersLoading
              .loading
            else
              if addingCode 'header'
                .adding-code.clearfix
                  +new_header_form headers=headers codeColor=codeColor
              if headers
                ul.code-list.list.list-unstyled.level-1
                  each headers
                    li.code.list-link.code-level-1(class="{{selected 'header'}} header-color-#{color}" data-id=_id)
                      span= label
                      button.btn-plain.delete-header-button(data-toggle="modal" data-header-id=_id data-target="#confirm-delete-header-modal")
                        i.fa.fa-trash-o
        .code-management-list-wrap.col-sm-4
          unless currentlySelectedHeader
            +curtain
          .code-management-list-header
            h4 Sub-Headers
            i.add-code.add-subHeader.fa.fa-plus(data-level="subHeader" class="{{#if addingCode 'subHeader'}}active{{/if}}")
          .code-management-list-container
            if currentlySelectedHeader
              if subHeadersLoading
                .loading
              else
                if addingCode 'subHeader'
                  .adding-code.clearfix
                    +new_subHeader_form
                if subHeaders
                  ul.code-list.list.list-unstyled.level-2
                    each subHeaders
                      li.code.list-link.code-level-2(class="{{selected 'subHeader'}}" data-id=_id)
                        span= label
                        button.btn-plain.delete-subheader-button(data-toggle="modal" data-subheader-id=_id data-target="#confirm-delete-subheader-modal")
                          i.fa.fa-trash-o
        .code-management-list-wrap.col-sm-4
          unless currentlySelectedSubHeader
            +curtain
          .code-management-list-header
            h4 Keywords
            unless addingKeyword
              i.add-code.add-keyword.fa.fa-plus(data-level="keyword" class="{{#if addingCode 'keyword'}}active{{/if}}")
          .code-management-list-container
            if currentlySelectedSubHeader
              if subHeadersLoading
                .loading
              else
                if addingCode 'keyword'
                  .adding-code.clearfix
                    +new_keyword_form
                if keywords
                  ul.code-list.list.list-unstyled.level-3
                    each keywords
                      li.code.code-level-3.not-clickable(class="{{archived}}")
                        span= label
                        unless archived
                          button.btn-plain.delete-keyword-button(data-toggle="modal" data-keyword-id=_id data-target="#confirm-delete-keyword-modal" )
                            i.fa.fa-trash-o
    else
      .loading

  +deleteHeaderModal(headerToDelete=headerToDelete)
  +deleteSubHeaderModal(subHeaderToDelete=subHeaderToDelete)
  +deleteKeywordModal(keywordToDelete=keywordToDelete)

template(name="curtain")
  .curtain-white

template(name="new_header_form")
  form(id="new-header-form")
    input.form-control.code(type="text" name="header" placeholder="Enter a header" autocomplete="off")
    ul.header-colors.list-unstyled
      each availableHeaderColors
        li(class="color-swatch-#{this} {{selectedColor this}}" data-color="#{this}")
    .space-btm-1.clearfix
      button.add.btn.btn-primary.btn-block(type="submit" data-level="header") Add Header
      button.cancel.btn.btn-default(type="button" data-level="header") Cancel

template(name="new_subHeader_form")
  form(id="new-subHeader-form")
    input.form-control.code(type="text" name="subHeader" placeholder="Enter a sub-header" autocomplete="off")
    button.add.btn.btn-primary.btn-block(type="submit" data-level="subHeader") Add Sub-Header
    button.cancel.btn.btn-default(type="button" data-level="subHeader") Cancel

template(name="new_keyword_form")
  form(id="new-keyword-form")
    input.form-control.code(type="text" name="keyword" placeholder="Enter a keyword" autocomplete="off")
    button.add.btn.btn-primary.btn-block(type="submit" data-level="keyword") Add keyword
    button.cancel.btn.btn-default(type="button" data-level="keyword") Cancel
